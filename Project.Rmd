---
title: "Final Project: Carbon Emissions by Coutry and by Year"
author: Daniel Welz, Guillaume Bilocq, Jasmine Mawjee, Virany Kho, Colin Steffe
date: 
output: html_document
---

```{r data importation, echo=F, warning=F, message=F}

library(readr)

# Set option to remove any scientific notation
options(scipen=999)

# Upload the data 
data<- read_csv("data/NFA 2019 public_data.csv")
country_code_table <- read_csv("data/GFN Country Code Concordance Table.csv")

```

# Introduction 

All of us are aware of the urgent need to reduce our individual ecological footprint by reducing our overall consumption, shift our purchasing habits, recycle more, invest in renewable energies and globally contribute to a common goal: a cleaner planet. Even though world leaders gather to unify and work as a united front towards sustainable changes with the ultimate goal to slow climate change, we still currently detect many unresolved issues regarding the topic of sustainability. 

Firstly, we understand that many aspects of sustainability are not well understood. Indeed, it is associated with many difficult terms (e.g. bio capacity, life-cycle analysis, embodied energy, footprint intensity, etc.) that non-specialists do not necessarily grasp. Because the average layman does not necessarily understand these terms and is sometimes overwhelmed by the overload of information in the News, individuals tend to completely turn away from reflecting about it. 

Secondly, it is not immediately obvious how our individual daily actions (e.g. limit water use waste, riding a bike over driving a car) fit in the overall picture of the community, country and the World. 

Thirdly, sustainability data is scattered among all kinds of media in a "fuzzy" way. Oftentimes when doing research about the topic, one ends up being constantly redirected to more and more sources that are not necessarily mutually exclusive and collectively exhaustive.

To address the above points and challenges, we want to create the S(ust)hinybility app based on a reliable database. This app aims at gathering worldwide data on carbon emissions caused by different types of production lands and exploit the information to produce visual outcomes enabling a user to look for specific information by country and by year. Therefore, the app will provide visualization to compare carbon emissions on a country (or region) level and understand the gravity and urgency of undertaking immediate long-lasting actions against climate change. 

The app aims to to have an impact on three different levels. First, the individuals are nudged to learn about ecological footprint. This increases knowledge and awareness and helps to make more informed decisions later on. Second, making ecological footprints comparable between countries helps to filter certain criteria and makes research more convenient. Here, the impact is a higher satisfaction of researchers looking for countries' involvement and responsibility towards sustainable changes. Third, the interactive app helps to track and trace developments. This tool could be a fact checker and used against wrongly spread information over the Internet in either way.

**Key terms for this topics**

  + **Ecological Footprint**: A measure of how much area of biologically productive land and water an individual, population, or activity requires to produce all the resources it consumes and to absorb the waste it generates, using prevailing technology and resource management practices. The Ecological Footprint is usually measured in global hectares. Because trade is global, an individual or country's Footprint includes land or sea from all over the world. Without further specification, Ecological Footprint generally refers to the Ecological Footprint of consumption. Ecological Footprint is often referred to in short form as Footprint.
  
  + **Biocapacity**: The capacity of ecosystems to regenerate what people demand from those surfaces. Life, including human life, competes for space. The biocapacity of a surface represents its ability to renew what people demand. Biocapacity is therefore the ecosystems' capacity to produce biological materials used by people and to absorb waste material generated by humans, under current management schemes and extraction technologies. Biocapacity can change from year to year due to climate, management, and proportion considered useful inputs to the human economy. In the National Footprint and Biocapacity Accounts, biocapacity is calculated by multiplying the physical area by the yield factor and the appropriate equivalence factor. Biocapacity is expressed in global hectares.
  
  + **Global Hectares**: Global hectares are the accounting unit for the Ecological Footprint and biocapacity accounts. These productivity weighted biologically productive hectares allow researchers to report both the biocapacity of the earth or a region and the demand on biocapacity (the Ecological Footprint). A global hectare is a biologically productive hectare with world average biological productivity for a given year. Global hectares are useful because different land types have different productivities. A global hectare of cropland, for example, would occupy a smaller physical area than the much less biologically productive pasture land, as more pasture would be needed to provide the same biocapacity as one hectare of cropland. Because world productivity varies slightly from year to year, the value of a global hectare may change slightly from year to year.
  
  + **National Footprint and Biocapacity Accounts**: The central data set that calculates the Footprint and biocapacity of the world and more than 200 countries, territories, and regions from 1961 to present (generally with a four year lag due to data availability). The ongoing development, maintenance, and upgrades of the National Footprint and Biocapacity Accounts are coordinated by the research team at Global Footprint Network and the Ecological Footprint Initiative at York University.
  
  + **Carbon Footprint**: The carbon Footprint measures CO2 emissions associated with fossil fuel use. In Ecological Footprint accounts, these amounts are converted into biologically productive areas necessary for absorbing this CO2. The carbon Footprint is included in the Ecological Footprint because it is a competing use of bioproductive space, since increasing CO2 concentrations in the atmosphere are considered to represent a build-up of ecological debt. Some carbon Footprint assessments express results in tonnes released per year, without translating this amount into area needed to sequester it.
  
  + **Consumption**: Use of goods or of services. The term consumption has two different meanings, depending on context. As commonly used regarding the Footprint, it refers to the use of goods or services. A consumed good or service embodies all the resources, including energy, necessary to provide it to the consumer. In full life-cycle accounting, everything used along the production chain is considered, including any losses along the way. For example, consumed food includes not only the plant or animal matter people eat or waste in the household, but also that lost during processing or harvest, as well as all the energy used to grow, harvest, process and transport the food.
  
  + **Calculation factor**: A generic term for factors which are used to translate a material flow expressed within one measurement system into another one. For example, a combination of two calculation factors—“yield factors” and “equivalence factors”— translates hectares into global hectares. The extraction rate calculation factor translates a secondary product into primary product equivalents. Calculation factors are available for download here.
  
  + **Ecological Deficit / Reserve**: The difference between the biocapacity and Ecological Footprint of a region or country. An ecological deficit occurs when the Footprint of a population exceeds the biocapacity of the area available to that population. Conversely, an ecological reserve exists when the biocapacity of a region exceeds its population's Footprint. If there is a regional or national ecological deficit, it means that the region is importing biocapacity through trade or liquidating regional ecological assets, or emitting wastes into the global commons such as the atmosphere. In contrast to the national scale, the global ecological deficit cannot be compensated for through trade, and is therefore equal to overshoot by definition.
  
  + **Land Type**: The Earth's approximately 12 billion hectares of biologically productive land and water areas are categorized into five types: cropland, grazing land, forest land, fishing ground, and built-up land. Forest land serves two distinct and competing uses: Forest products and CO2 sequestration.
Visit full glossary here

  + **Biocapacity Per Person (or Per Capita)**: There were ~ 12 billion hectares of biologically productive land and water areas on Earth in 2017. Dividing by the number of people alive in that year (7.5 billion) gives 1.6 global hectares per person. This area also needs to accommodate the wild species that compete for the same biological material and spaces as humans.
  
  + **Biologically Productive Land and Water**: The land and water (both marine and inland waters) area that supports significant photosynthetic activity and the accumulation of biomass used by humans. Non-productive areas as well as marginal areas with patchy vegetation are not included. Biomass that is not of use to humans is also not included. The total biologically productive area on land and water in 2014 was approximately 12 billion hectares.
  

# Data description 

The 2019 edition of the National Footprint and Biocapacity Accounts was produced, for the very first time, under the close observation of the team at York University’s Faculty of Environmental Studies (FES) who is part of the Ecological Footprint Initiative. Going forward, the Ecological Footprint Initiative team in Toronto will be entrusted with producing National Footprint and Biocapacity Accounts data with the support of Global Footprint Network, in the context of the partnership created in 2018 by both organizations with a view to ensuring ever more robust and transparent data in the future. [Source: https://data.world/footprint/nfa-2019-edition]

The NFA 2019 public dataset has overall 12 columns and  72,186 rows. First the column names are provided and described. 

  + **country**: This column provides the countries of the world (Afganisthan - Zimbabwe) and also data for the world as a whole.
  
  + **Year**: For each country data is provided from 1961 until 2016. Of course, here are some outliers as Armenia (which was founded in 1991) and thus the data starts with 1992 for this specific case. 
    
  + **country_code**: Numerical code per country ranging from 1 to 5001
  
  + **record**: For each year and for each country, eight different record are made per year.
      1. **AreaPerCap**: Area divided divided by population
      2. **AreaTotHA**: Total area in hectares (ha)
      3. **BiocapPerCap**: Biocapacity in global hectares (gha) divided by population
      4. **BiocapTotGHA**: Total biocapacity in global hectares (gha)
      5. **EFConsPerCap**: Ecological Footprint of consumption in global hectares (gha) divided by population
      6. **EFConsTotGHA**: Total Ecological Footprint of consumption in global hectares (gha)
      7. **EFProdPerCap**: Ecological Footprint of production in global hectares (gha) divided by population
      8. **EFProdTotGHA**: Total Ecological Footprint of production in global hectares (gha)
      
  + **crop_land**: The cropland Footprint reflects the amount of land necessary to grow all crops consumed by humans 
and livestock. This includes agricultural products, market animal feed, and cropped grasses used as 
livestock feed.  

  + **grazing_land**: The grazing land Footprint assesses demand for grazing land to feed livestock and the embodied 
demand for grazing land in traded goods. The calculations estimate the total feed requirements of all livestock produced and the percentage of 
livestock energy requirements derived from concentrate feeds, forage crops, and crop residues. The 
difference between total feed requirement and total cropped feed supply is taken to equal the 
demand for grazing land.  

  + **forest_land**: The forest products Footprint assesses human demand for the products of the world’s forests. The 
forest products Footprint of production is comprised of two broad types of primary product: wood 
used for fuel; and timber and pulp used as a raw material to produce derived wood products. The forest products Footprint represents the area of world average forest land needed to supply wood for fuel, construction, and paper. To calculate the Footprint of forest products, timber harvests are 
compared against the net annual growth rates of the world’s forests. Global and country specific forest 
yields (i.e., net annual increments) are drawn from a combination of sources.
  
  + **fishing_ground**: The Fishing Grounds Footprint represents the demands of fisheries on aquatic ecosystems as the 
equivalent surface area required to sustainably support a country’s catch. The Fishing Grounds Footprint is calculated by 
dividing the amount of primary production consumed by an aquatic species over its lifetime by an estimate of the harvestable primary production per 
hectare of marine area.
  
  + **built_up_land**: The built-up land Footprint represents bioproductive land that has been physically occupied by human 
activities. The NFA tracks infrastructure areas required for housing, transportation, and 
industrial production. The calculations assume that infrastructure area covers former cropland, and 
apply the yield and equivalence factors for cropland to the calculation of the Footprint. 
  
  + **carbon**: The carbon Footprint represents the area of forest land required to sequester anthropogenic carbon 
dioxide emissions. The NFA calculates the Footprint of carbon dioxide emissions using 
several parameters including domestic fossil fuel combustion and electricity use, embodied carbon in 
traded items and electricity, a country’s share of global international transport emissions, and non-
fossil-fuel sources. The total amount of carbon dioxide allocated to each country is converted into global hectares 
based on the Footprint intensity of carbon. This conversion factor is derived from the following: 

    • the yield of the productive land that is required to absorb the carbon dioxide emissions 
    • the amount of carbon absorbed by oceans 
    • an equivalence factor for carbon as a land type 
    • an adjustment factor for temporal changes in yield from the forest 
  
  + **total**: 
  
  + **Qscore**: Quality of overall country data as assessed by NFA researchers. National Footprint and Biocapacity Accounts use internationally available data from multiple datasets for all countries for each year going back to 1961. In some cases data may be limited, unavailable, or may contain apparent errors. While the accounts include some data error improvement and estimation of missing data, results for countries and/or years are inevitably of variable reliability. As part of the completion of each edition of the National Footprint and Biocapacity Accounts, Global Footprint Network researchers assess a level of confidence in the final results for each country [More information: https://www.footprintnetwork.org/data-quality-scores/]
  
Citation: 
Here is a suggested citation: Global Footprint Network National Footprint and Biocapacity Accounts, 2021 Edition Downloaded [today's date] from https://data.footprintnetwork.org.

# Exploratory data analysis

```{r map total footprint, echo=F, warning=F, message=F}

# Create a data frame of map data 
mapdata <- map_data("world") %>%
           rename(country = region)

# Create a subset of our data
EFProdTotGHA_mr <- data %>%
                   filter(record == "EFProdTotGHA" & year == 2016)

# Add coordinates to our data 
EFProdTotGHA_mr <- left_join(mapdata,
                             EFProdTotGHA_mr,
                             by = "country")

# Plot the map
map1 <- ggplot(EFProdTotGHA_mr,
               mapping = aes(x = long,
                             y = lat,
                             group = group, # change NA for a lighter grey colour
                             text = paste("Country: ", country,
                                          "<br>Crop land: ", crop_land,
                                          "<br>Grazing land: ", grazing_land,
                                          "<br>Forest land: ", forest_land,
                                          "<br>Fishing ground: ", fishing_ground,
                                          "<br>Total: ", total))) +

         geom_polygon(aes(fill = total)) +

         # Plot legends
         labs(title = "Total Ecological Footprint of Production (in gha) in 2016",
              subtitle = "Note: grey colored countries have unavailable data",
              caption = "source: GFN Country Code Concordance Table.csv",
              fill = "Total Ecological Footprint of Production") +

          # Plot layout
          theme(rect = element_blank(),
                axis.ticks.y = element_blank(),
                axis.ticks.x = element_blank(),
                axis.text.y = element_blank(),
                axis.title.y = element_blank(),
                axis.title.x = element_blank(),
                axis.text.x = element_blank())  +
                
           theme(plot.title = element_text(hjust = 0.5))

ggplotly(map1,
         tooltip = "text")

```

# R package
- what and how

# Shiny app
- what and how

# Website
- what and how

# Conclusion 

# Glossary

# Appendix
